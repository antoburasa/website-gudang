<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aplikasi Gudang</title>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<style>
body{font-family:Arial;background:#f2f4f7;margin:0;padding:15px}
h2{margin-top:0}
.card{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,button{width:100%;padding:10px;margin-top:8px}
button{background:#2563eb;color:#fff;border:none;border-radius:6px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#eee}
</style>
</head>
<body>

<div class="card">
  <h2>ðŸ“¦ Master Barang</h2>
  <input id="namaBarang" placeholder="Nama barang">
  <button onclick="simpanBarang()">Simpan</button>
</div>

<div class="card">
  <h2>ðŸ“Š Daftar Barang</h2>
  <table>
    <thead>
      <tr>
        <th>Nama</th>
        <th>Stok</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody id="listBarang"></tbody>
  </table>
</div>

<script>
/* =============================
   FIREBASE CONFIG (GANTI INI)
   ============================= */
const firebaseConfig = {
  apiKey: "ISI_API_KEY",
  authDomain: "ISI_AUTH_DOMAIN",
  databaseURL: "ISI_DATABASE_URL",
  projectId: "ISI_PROJECT_ID",
  storageBucket: "ISI_STORAGE_BUCKET",
  messagingSenderId: "ISI_SENDER_ID",
  appId: "ISI_APP_ID"
};

/* =============================
   INIT FIREBASE
   ============================= */
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* =============================
   SIMPAN BARANG (FIX 100%)
   ============================= */
function simpanBarang(){
  const nama = document.getElementById("namaBarang").value.trim();
  if(nama === ""){
    alert("Nama barang wajib diisi");
    return;
  }

  db.ref("barang/" + nama).set({
    stok: 0
  }).then(()=>{
    alert("Barang tersimpan");
    document.getElementById("namaBarang").value = "";
  }).catch(err=>{
    alert("Error: " + err.message);
  });
}

/* =============================
   LOAD BARANG REALTIME
   ============================= */
db.ref("barang").on("value", snapshot=>{
  const tbody = document.getElementById("listBarang");
  tbody.innerHTML = "";

  snapshot.forEach(child=>{
    const nama = child.key;
    const stok = child.val().stok || 0;

    tbody.innerHTML += `
      <tr>
        <td>${nama}</td>
        <td>${stok}</td>
        <td>
          <button onclick="hapusBarang('${nama}')">Hapus</button>
        </td>
      </tr>
    `;
  });
});

/* =============================
   HAPUS BARANG
   ============================= */
function hapusBarang(nama){
  if(confirm("Hapus barang " + nama + "?")){
    db.ref("barang/" + nama).remove();
  }
}
</script>

</body>
</html>
