<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>SMS GUDANG v1.0</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center text-white">

<!-- LOGIN -->
<div id="loginBox" class="bg-gray-800 p-6 rounded-lg w-80">
  <h2 class="text-xl font-bold mb-4 text-center">Login Gudang</h2>
  <input id="username" class="w-full p-2 mb-2 text-black rounded" placeholder="Username">
  <input id="password" type="password" class="w-full p-2 mb-3 text-black rounded" placeholder="Password">
  <button onclick="login()" class="w-full bg-blue-600 p-2 rounded">Login</button>
  <p id="loginMsg" class="text-red-400 text-sm mt-2"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden w-full max-w-4xl p-6">
  <div class="flex justify-between mb-4">
    <h1 class="text-2xl font-bold">Dashboard Gudang</h1>
    <button onclick="logout()" class="bg-red-600 px-4 py-2 rounded">Logout</button>
  </div>

  <!-- INPUT -->
  <div class="bg-gray-800 p-4 rounded mb-4 grid grid-cols-1 md:grid-cols-3 gap-2">
    <input id="barang" class="p-2 text-black rounded" placeholder="Nama Barang">
    <input id="jumlah" type="number" class="p-2 text-black rounded" placeholder="Jumlah">
    <div class="flex gap-2">
      <button onclick="barangMasuk()" class="bg-green-600 w-full p-2 rounded">Barang Masuk</button>
      <button onclick="barangKeluar()" class="bg-yellow-500 w-full p-2 rounded text-black">Barang Keluar</button>
    </div>
  </div>

  <!-- TABEL STOK -->
  <div class="bg-gray-800 p-4 rounded mb-4">
    <h2 class="font-bold mb-2">Stok Gudang</h2>
    <table class="w-full text-sm">
      <thead>
        <tr class="border-b border-gray-600">
          <th class="text-left">Barang</th>
          <th>Stok</th>
        </tr>
      </thead>
      <tbody id="stokTable"></tbody>
    </table>
  </div>

  <!-- RIWAYAT -->
  <div class="bg-gray-800 p-4 rounded">
    <h2 class="font-bold mb-2">Riwayat</h2>
    <ul id="riwayat" class="text-sm space-y-1"></ul>
  </div>
</div>

<script>
const users = {
  admin: "12345",
  gudang: "123"
};

let currentUser = null;
let stok = JSON.parse(localStorage.getItem("stok")) || {};
let riwayat = JSON.parse(localStorage.getItem("riwayat")) || [];

function login(){
  const u = username.value;
  const p = password.value;
  if(users[u] && users[u] === p){
    currentUser = u;
    loginBox.classList.add("hidden");
    dashboard.classList.remove("hidden");
    render();
  } else {
    loginMsg.innerText = "Username / Password salah";
  }
}

function logout(){
  currentUser = null;
  dashboard.classList.add("hidden");
  loginBox.classList.remove("hidden");
}

function barangMasuk(){
  const b = barang.value.toLowerCase();
  const j = parseInt(jumlah.value);
  if(!b || j <= 0) return;

  stok[b] = (stok[b] || 0) + j;
  tambahRiwayat("MASUK", b, j);
  simpan();
}

function barangKeluar(){
  const b = barang.value.toLowerCase();
  const j = parseInt(jumlah.value);
  if(!b || j <= 0) return;
  if(!stok[b] || stok[b] < j){
    alert("Stok tidak cukup");
    return;
  }

  stok[b] -= j;
  tambahRiwayat("KELUAR", b, j);
  simpan();
}

function tambahRiwayat(tipe, barang, jumlah){
  const tgl = new Date().toLocaleString();
  riwayat.unshift(${tgl} | ${currentUser} | ${tipe} | ${barang} (${jumlah}));
}

function simpan(){
  localStorage.setItem("stok", JSON.stringify(stok));
  localStorage.setItem("riwayat", JSON.stringify(riwayat));
  render();
}

function render(){
  stokTable.innerHTML = "";
  for(let b in stok){
    stokTable.innerHTML += `<tr>
      <td>${b}</td>
      <td class="text-center">${stok[b]}</td>
    </tr>`;
  }

  riwayat.innerHTML = "";
  riwayat.slice(0,10).forEach(r=>{
    riwayat.innerHTML += <li>${r}</li>;
  });
}
</script>

</body>
</html>