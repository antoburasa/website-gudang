<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Gudang SMS</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            .print-only { display: block !important; }
            .card { border: none !important; box-shadow: none !important; }
        }
        .print-only { display: none; }
    </style>
</head>
<body class="bg-gray-100 p-4 font-sans text-slate-800">

    <div class="max-w-2xl mx-auto space-y-4">
        <div class="bg-blue-900 text-white p-6 rounded-2xl shadow-lg text-center border-b-4 border-yellow-500">
            <h1 class="text-2xl font-bold uppercase tracking-tight">PT. SAMUDRA MANDIRI SENTOSA</h1>
            <p class="text-xs opacity-80 tracking-[0.2em] mt-1 text-yellow-400">Inventory Management System</p>
        </div>

        <div class="bg-white p-5 rounded-2xl shadow-md border border-gray-200 no-print">
            <div class="space-y-3">
                <input type="text" id="nama" placeholder="NAMA BARANG" class="w-full p-3 border rounded-xl uppercase font-bold outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50">
                <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="qty" placeholder="JUMLAH" class="p-3 border rounded-xl font-bold outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-center">
                    <input type="text" id="ket" placeholder="OLEH / KET" class="p-3 border rounded-xl outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 text-sm">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="proses('masuk')" class="bg-emerald-600 text-white py-4 rounded-xl font-bold active:scale-95 shadow-md uppercase text-xs">Simpan Stok</button>
                    <button onclick="proses('keluar')" class="bg-rose-600 text-white py-4 rounded-xl font-bold active:scale-95 shadow-md uppercase text-xs">Kurangi Stok</button>
                </div>
                <button onclick="window.print()" class="w-full mt-2 bg-slate-800 text-white py-2 rounded-lg font-bold text-[10px] uppercase tracking-widest hover:bg-black transition">Cetak Laporan</button>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 card">
            <div class="bg-slate-800 p-3 flex justify-between items-center no-print">
                <span class="text-white text-[10px] font-bold uppercase tracking-widest px-2">ðŸ“¦ Stok Gudang</span>
                <input type="text" id="cari" onkeyup="cariBarang()" placeholder="Cari barang..." class="text-[10px] p-2 rounded-lg outline-none w-1/2 bg-slate-700 text-white placeholder-slate-400 border-none">
            </div>
            
            <div class="print-only p-4 text-center border-b-2 border-black mb-4">
                <h2 class="text-xl font-bold uppercase">LAPORAN STOK GUDANG AKTIF</h2>
                <p class="text-xs italic">Dicetak pada: <span id="tglCetak"></span></p>
            </div>

            <table class="w-full text-sm">
                <thead>
                    <tr class="bg-gray-50 border-b">
                        <th class="p-3 text-left text-xs text-gray-500 uppercase font-bold">Nama Barang</th>
                        <th class="p-3 text-right text-xs text-gray-500 uppercase font-bold">Jumlah Stok</th>
                    </tr>
                </thead>
                <tbody id="tStok" class="divide-y divide-gray-100"></tbody>
            </table>
        </div>

        <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200 card">
            <div class="bg-blue-600 text-white p-3 text-[10px] font-bold uppercase no-print flex justify-between">
                <span>ðŸ•’ Catatan Transaksi</span>
                <button onclick="if(confirm('Hapus log?')) db.ref('riwayat').remove()" class="text-[8px] underline">RESET</button>
            </div>
            <div id="tLog" class="p-3 space-y-3 bg-white">
                </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDbf4nf0iQleiB3R8Un89Gpi1Oio-tTB3o",
            authDomain: "gudang-sms-4c81c.firebaseapp.com",
            databaseURL: "https://gudang-sms-4c81c-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "gudang-sms-4c81c",
            storageBucket: "gudang-sms-4c81c.firebasestorage.app",
            appId: "1:598362736106:web:c8e2732d6ac7613931de93"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function proses(mode) 
