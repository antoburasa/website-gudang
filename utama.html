<!DOCTYPE html>
<html>
<head>
    <title>Gudang SMS Fix</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-200 p-5" onload="alert('SISTEM AKTIF! Jika pesan ini muncul, berarti kode baru sudah terbaca.')">

    <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-xl">
        <h1 class="text-xl font-bold text-center mb-4 text-blue-800">PT. SMS - TEST SYSTEM</h1>
        
        <div class="space-y-4">
            <div>
                <label class="block text-xs font-bold uppercase">Nama Barang</label>
                <input type="text" id="nama" class="w-full p-2 border rounded">
            </div>
            <div>
                <label class="block text-xs font-bold uppercase">Jumlah</label>
                <input type="number" id="jumlah" class="w-full p-2 border rounded">
            </div>
            <button onclick="simpan()" class="w-full bg-blue-600 text-white py-3 rounded font-bold">TES SIMPAN DATA</button>
        </div>
        
        <div id="status" class="mt-4 text-center text-sm font-bold text-red-600"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDbf4nf0iQleiB3R8Un89Gpi1Oio-tTB3o",
            authDomain: "gudang-sms-4c81c.firebaseapp.com",
            databaseURL: "https://gudang-sms-4c81c-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "gudang-sms-4c81c",
            storageBucket: "gudang-sms-4c81c.firebasestorage.app",
            messagingSenderId: "598362736106",
            appId: "1:598362736106:web:c8e2732d6ac7613931de93"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function simpan() {
            const n = document.getElementById('nama').value;
            const j = parseInt(document.getElementById('jumlah').value);
            
            if(!n || !j) return alert("Isi nama dan jumlah!");

            document.getElementById('status').innerText = "Sedang menyimpan...";

            db.ref('stok/' + n.toLowerCase()).set({
                nama: n,
                stok: j,
                waktu: new Date().toLocaleString()
            }).then(() => {
                alert("BERHASIL TERSIMPAN!");
                document.getElementById('status').innerText = "Data Terakhir: " + n + " Berhasil";
            }).catch(e => {
                alert("ERROR: " + e.message);
                document.getElementById('status').innerText = "Gagal: " + e.message;
            });
        }
    </script>
</body>
</html>